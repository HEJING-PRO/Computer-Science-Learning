# 第三章 Java 的基本程序设计结构

## 3.1 一个简单的 Java 应用程序

1. 一个源文件（`.java`）中只能有一个公共类（`public`），且文件名必须与公共类的名字相同。

2. Java 程序执行流程：源文件 →  字节码文件  → 结果

   ```java
   /* 编译成字节码文件 */
   javac Hello.java
   /* 运行，文件名后不能添加扩展名 */
   java Hello
   ```

   - 编译：利用编译器（`javac.exe`）将源文件（`.java`）编译成 JVM 可识别的字节码文件（`.class`）。

   - 运行：利用运行工具（`java.exe`）对字节码文件进行执行，本质是将字节码文件装载到 JVM 执行。

     注：对修改后的源文件需要重新编译，生成新的字节码文件后再执行。

3. 运行已编译的程序时，虚拟机通常从公共类中的`main`方法开始执行，可以将`main`方法写在非`public`中，并指定运行此非`public`类，`main`方法必须声明为`public`、必须是静态的。

   ```java
   public static void main(String[] args) {
       ...
   }
   ```

## 3.2 注释

1. 单行注释：`//`；

2. 多行注释：`/* */`；

3. 文档注释：`/** */`，注释内容可以被 JDK 提供的工具`javadoc`所解析，生成一套以网页文件形式呈现的该程序的说明文档，通常写在类前。

   ```bash
   # 需要说明要标签，如 author、version 等
   javadoc -d d:/demo -author -version Hello.java
   ```

## 3.3 数据类型

1. Java 是一种强类型语言，即必须为每一个变量声明一种类型。

2. 进制

3. 基本数据类型，各种整数类型有**固定的范围和字段长度**，不受操作系统的影响，以保证程序的可移植性。

   |   类型    | 占用空间 |      取值范围      |     备注      |
   | :-------: | :------: | :----------------: | :-----------: |
   |   `int`   |  4 字节  | -21.4 亿 ~ 21.4 亿 |               |
   |  `short`  |  2 字节  |   -32668 ~ 32767   |               |
   |  `long`   |  8 字节  |                    |               |
   |  `byte`   |  1 字节  |     -128 ~ 127     |               |
   |  `float`  |  4 字节  |                    | 6 位有效数字  |
   | `double`  |  8 字节  |                    | 15 位有效数字 |
   |  `char`   |  1 字节  |                    |               |
   | `boolean` |  1 字节  |    true、false     |               |

   - 整数类型：**整型常量默认为**`int`**型**，声明为`long`型的常量后必须添加`l`或`L`；通常情况下使用`int`类型。

   - 浮点类型：在机器中的存放形式为“符号位 + 指数位 + 尾数位”；位数为可能丢失，可能造成精度损失，因此小数均为近似值；**浮点数常量默认为**`double`**型**，声明`float`型常量，必须添加`f`或`F`；常量具有两种表示形式，即十进制数形式和科学计数法形式；通常情况下使用`double`类型；**当对运算结果是小数的数据进行相等判断时，应当以两个数的差值的绝对值在某个精读范围内判断**，若为查询得到的数据或直接赋值的数据，可直接使用等号判断。

     ```java
     double fir = 2.7;
     /* 运算结果为 2.699999999997 */
     double sec = 8.1 / 3;
     /* 错误写法 */
     if(fir == sec){}
     /* 正确写法 */
     if(Math.abs(fir - sec) < num){}
     ```
     
   - 字符类型：使用单引号，可表示单个字符；可存放汉字；可以直接存放一个数字，输出对应的 ASCII 码字符。在内存中**存储**的是字符对应的 **ASCII 码值的二进制形式**，读取时则是先将二进制转换为十进制，再显示对应的字符。在 Java 中，`char`类型描述 UTF-16 编码中的一个代码单元。

     > 强烈建议不在程序中使用`char`类型，除非确实需要处理 UTF-16 代码单元。

   - 布尔类型：不可以使用 0 或非 0 数字替代`false`或`true`。

   - 字符编码

     - ASCII 码：一个字节表示，一共 128 个字符。
     - Unicode：使用固定大小的编码，使用两个字节表示字符，字符和汉字均占用 2 个字节。
     - UTF-8：可变大小编码，字符使用 1 个字节，汉字使 2 个字节。
     - GBK：可表示汉字，字母使用 1 个字节，汉字使用 2 个字节。

   - 自动类型转换：当进行赋值或运算时，低精度类型自动转换为高精度类型。

     - `char` → `int` → `long` → `float` → `double`；
     - `byte` → `short` → `int` → `long` → `float` → `double`；
     - 当多种类型的数据混合运算时，自动将所有数据转换成精读最大的数据类型，然后进行计算；
     - 当将高精度数据赋值给低精度变量时会报错，反之则会进行自动类型转换；
     - `byte`、`short`和`char`之间不会相互转换；
     - 布尔类型不参与转换；
     - `byte`、`short`、`char`可进行计算，计算时先转换为`int`型，即三者的混合运算结果为`int`型；
     - 自动提升规则：表达式结果的类型自动提升为操作数中的最大精度类型。

   - 规则：所有浮点数值计算都遵循 IEEE 754 规范，分别使用正无穷大（`Double.POSITIVE_INFINITY`）、负无穷大（`Double.NEGATIVE_INFINITY`）、`NaN`（`Double.NaN`）表示溢出或出错情况。

     > 注：所有非数值的值均互不相等，因此不能使用`num == Double.NaN`检测一个特定值是否等于`Double.NaN`，可以使用`Double.isNaN(num)`判断。

4. 引用数据类型

   |        类型         | 占用空间 | 取值范围 |
   | :-----------------: | :------: | :------: |
   |    类（`class`）    |          |          |
   | 接口（`interface`） |          |          |
   |    数组（`[]`）     |          |          |


## 3.4 变量与常量

1. 

## 3.5 运算符



## 3.6 字符串



## 3.7 输入输出



## 3.8 控制流



## 3.9 大数



## 3.10 数组